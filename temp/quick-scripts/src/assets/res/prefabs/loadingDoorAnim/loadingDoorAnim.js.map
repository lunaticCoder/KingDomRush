{"version":3,"sources":["assets/res/prefabs/loadingDoorAnim/loadingDoorAnim.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import SoundsManager from \"../../../scripts/common/module/soundsManager\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class LoadingDoorAnim extends cc.Component {\n\n    @property({\n        displayName: \"开关门时间\"\n    })\n    time: number = 1;\n\n    private lDoor: cc.Node = null;\n    private rDoor: cc.Node = null;\n    /**\n     * 门是开的吗\n     */\n    isDoorOpen: boolean = true;\n    private viewSize: cc.Size = null;\n    onLoad() {\n        this.lDoor = this.node.getChildByName(\"lDoor\");\n        this.rDoor = this.node.getChildByName(\"rDoor\");\n        this.viewSize = cc.view.getVisibleSize();\n\n        this.setState(true)\n    }\n\n    start() {\n    }\n\n    /**\n     * 设置门的状态\n     * @param state true为开 \n     */\n    setState(state: boolean) {\n        if (state) {\n            this.lDoor.setPosition(cc.v2(-this.viewSize.width, 0));\n            this.rDoor.setPosition(cc.v2(this.viewSize.width, 0));\n            this.isDoorOpen = true;\n        }\n        else {\n            this.lDoor.setPosition(cc.v2(2, 0))\n            this.rDoor.setPosition(cc.v2(-2, 0))\n            this.isDoorOpen = false;\n        }\n    }\n\n    /**\n     * 开门动画\n     */\n    openDoor() {\n        if (this.isDoorOpen)\n            return;\n\n        let d: cc.ActionInterval = cc.delayTime(1);\n        let func: cc.ActionInstant = cc.callFunc(function () {\n            let la: cc.ActionInterval = cc.moveTo(this.time, cc.v2(-this.viewSize.width, 0)).easing(cc.easeIn(2));\n            let ra: cc.ActionInterval = cc.moveTo(this.time, cc.v2(this.viewSize.width, 0)).easing(cc.easeIn(2));\n            this.lDoor.runAction(la);\n            this.rDoor.runAction(ra);\n        }.bind(this));\n        let seq: cc.ActionInterval = cc.sequence(d, func);\n        this.node.runAction(seq);\n\n        this.isDoorOpen = true;\n    }\n\n    /**\n     * 关门动画\n     * @param func 回调函数\n     */\n    closeDoor(func: cc.ActionInstant) {\n        if (!this.isDoorOpen)\n            return;\n\n        let la: cc.ActionInterval = cc.moveTo(this.time, cc.v2(2, 0)).easing(cc.easeIn(2));\n        let ra: cc.ActionInterval = cc.moveTo(this.time, cc.v2(-2, 0)).easing(cc.easeIn(2));\n        let f1: cc.ActionInstant = cc.callFunc(function () {\n            SoundsManager.ins.playEffect(\"sounds/close_door\");\n        }, this);\n\n        let seq: cc.ActionInterval = cc.sequence(ra, f1, func);\n        this.lDoor.runAction(la);\n        this.rDoor.runAction(seq);\n\n        this.isDoorOpen = false;\n    }\n\n}\n"]}